using System;

{#each Schemas}
{#if !($) => IsIgnored}
namespace {() => ResolveRootNamespace}{($) => ResolveName}DataService
{{
    using HatTrick.DbEx.Sql;

    #region {($) => ResolveName}
    public partial class {($) => ResolveName}
    {{
        #region internals
        private static {($) => ResolveName}SchemaExpression _schema;
        #endregion

        #region interface
		{#each ($) => ResolveConsolidatedTablesAndViews}
		{#if !($) => IsIgnored}
        public static {($) => ResolveName}Entity {($) => ResolveName} {{ get {{ return _schema.{($) => ResolveName}; }} }}
		{/if}
		{/each}
        #endregion

        #region constructors
        private {($) => ResolveName}()
        {{

        }}
        #endregion

		#region methods
        public static void Initialize(ISqlSchemaMetadata metadata)
        {{
            _schema = new {($) => ResolveName}SchemaExpression(new Lazy<ISqlSchemaMetadata>(() => metadata));
        }}
        #endregion
    }}
    #endregion
}}
{/if}
{/each}